(function(b){ns("News").BitmovinPlayer={MAInit:null,currentBitrate:"",init:function(){var a=new window.spectrumPlayer.default("bitmovin-video-player"),e=bowser.getParser(navigator.userAgent).getResult(),d=b(".platform-video-data").attr("data-unsupportedBrowserMsg");if("Linux"===e.os.name&&b("#bitmovin-video-player").length)b("body").addClass("pvp-enabled"),b("#bitmovin-video-player").addClass("bitmovin-player-container").text(d);else try{News.BitmovinPlayer.loadPlayer(a)}catch(f){console.error(f),
console.error(f.stack)}},getMPXFeedApi:function(){var a=News.BitmovinPlayer.getPId();return b(".platform-video-data").attr("data-platformfeedmpxurl")+"?byreleasepid\x3d"+a},getAdModule:function(a){var e=a.exports.PlayerEvent.ModuleReady,d=b.Deferred();a.on(e,function(b){b.name===a.exports.ModuleName.Advertising&&(a.ads&&a.ads.schedule?d.resolve(a.ads):d.reject("Ad Scheduler feature failed to load"))});return d.promise()},schedulePreroll:function(a){var e=!0===(void 0==b(".site-header header, .site-header .site-header-inner").data("ad-preroll-disable")?
!1:!0)?"":b(".platform-video-data").attr("data-manifesturl");try{e&&a.schedule?(console.log("preroll ad scheduled"),a.schedule({tag:{type:"vmap",url:e,id:"pre-roll"},position:"pre"})||console.warn("Could not schedule pre-roll ad.")):e&&console.error("Could not load advertising module for manifest: "+e)}catch(d){console.error("An error occurred while trying to schedule preroll",d)}},loadPlayer:function(a){var e=b(".platform-video-data"),d=e.attr("data-license"),f=News.SoftWallModal.authType(),m=e.data("autoplay"),
h=b(".article-headline").text(),t=News.BitmovinPlayer.getPId(),l={contentType:"vod",authType:f,text:h,pid:t};h={};usrAuth||"openMode"===f||(m=!1);!0===m?(h.autoplay=!0,h.muted=!0):h.autoplay=!1;a.initialize({key:d,showMetricsOverlay:!1,maxBitrateWaitTimeMs:1E3,style:{ux:!0,aspectratio:"16:9",controls:!0,height:"100%"},logs:{level:a.logLevels.off},playback:h,cast:{enabled:!1},adaptation:{logic:"v3",startupBitrate:"5.5mbps",desktop:{bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:Infinity,
minSelectableVideoBitrate:0,maxSelectableVideoBitrate:Infinity}},mobile:{bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:Infinity,minSelectableVideoBitrate:0,maxSelectableVideoBitrate:Infinity}}},tweaks:{native_hls_parsing:!0,native_hls_download_error_handling:!0},location:{serviceworker:"/serviceworker.js"},advertising:{}}).then(function(){b("body").addClass("pvp-enabled");setTimeout(function(){b(".header-player img.img-responsive").remove()},500);var d=new spectrumPlayer.PlayerUI,
c=a.player;if(localStorage.getItem("vod-volume")){var g=e.data("autoplay"),q=parseInt(localStorage.getItem("vod-volume")),h="0"===localStorage.getItem("vod-volume");usrAuth||"openMode"===f||(g=!1);0<q&&c.setVolume(q);!g&&h&&c.mute()}d.buildDefaultUI(c,{});c=d.availableComponents;d.hideComponents([c.settingsItems.audioTrack,c.settingsItems.audioQuality]);b("#bitmovin-video-player").find(".bmpui-ui-subtitle-overlay:first").hide();usrAuth||"openMode"===f||"open"===f||(b("#bitmovin-video-player :button").css("pointer-events",
"none"),b("#bitmovin-video-player").find(".bmpui-ui-controlbar").hide(),b("#bitmovin-video-player").append('\x3cdiv class\x3d"playerBlocker"\x3e\x3c/div\x3e'),b(".playerBlocker").click(function(b){b.stopPropagation();News.SoftWallModal.showModal(a)}))}).then(function(){b.getJSON(News.BitmovinPlayer.getMPXFeedApi(),function(d){var c=bowser.getParser(navigator.userAgent).getResult(),g=d.entries[0],f=[],h=[];b.each(g.content,function(a,b){f.push(b.streamingUrl);h.push(b.duration)});videoLength=h.filter(function(a){return a}).pop();
l.length=videoLength;var p=News.BitmovinPlayer.filterVideoType(f,"mpd"),r=News.BitmovinPlayer.filterVideoType(f,"m3u8"),k=News.BitmovinPlayer.filterVideoType(f,"mp4");d="";var n=e.attr("data-videothumbnail");void 0===n&&(n=g.defaultThumbnailUrl);/(googlebot\/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)/i.test(navigator.userAgent)?
(c=k[0],g="progressive",d=[{id:"sub1",lang:"en",label:"English",url:News.BitmovinPlayer.getSubtitleURL(c)}]):"iOS"===c.os.name&&"Safari"!==c.browser.name?(c=k[0],g="progressive",d=[{id:"sub1",lang:"en",label:"English",url:News.BitmovinPlayer.getSubtitleURL(c)}]):"Safari"===c.browser.name?0!==r.length?(c=r[0],g="hls"):(c=k[0],g="progressive",d=[{id:"sub1",lang:"en",label:"English",url:News.BitmovinPlayer.getSubtitleURL(c)}]):0!==p.length?(c=p[0],g="dash"):(c=k[0],g="progressive",d=[{id:"sub1",lang:"en",
label:"English",url:News.BitmovinPlayer.getSubtitleURL(c)}]);l.manifestURL=c;l.streamType=g;News.App.QuantumAnalytics.setContent(l);if(!0===m)News.BitmovinPlayer.playbackSelectEvents(c);else News.BitmovinPlayer.onClickPlaybackSelectEvents(a,c);a.setSrc({manifestUrl:c,streamType:g,additionalParams:{poster:n,subtitleTracks:d}}).then(function(){var a=News.BitmovinPlayer.cfLogoBranding();"none"!=a&&(a='\x3cdiv class\x3d"playerBranding"\x3e\x3cimg src\x3d"/etc/designs/news/clientlibs/css/images/video-overlays/'+
(a+"_bug.png")+'"\x3e\x3c/div\x3e',b("#bitmovin-video-player").append(a))}).catch(function(a){News.App.QuantumAnalytics.playbackFailed("SpectrumLocal_Playback_Failure_clipVOD",a.message,a.code)});News.BitmovinPlayer.triggerMediaEvents(a,l);News.BitmovinPlayer.getAdModule(a.player).then(News.BitmovinPlayer.schedulePreroll)}).fail(function(a){News.App.QuantumAnalytics.playbackFailed("SpectrumLocal_Playback_Failure_clipVOD",a.message,a.code)})})},getSubtitleURL:function(a){if(a)return a.endsWith("_video.mp4")?
a.replace("_video.mp4","_captions.mp4.vtt"):a.replace("mp4","vtt")},getPId:function(){return b(".platform-video-data").attr("data-pid")},cfLogoBranding:function(){var a;b.ajax({url:"/services/api/videos/v1/lookup",async:!1,headers:{"Lookup-Pids":News.BitmovinPlayer.getPId()}}).done(function(e){a=0<e.videos.length?e.videos[0].branding:b(".platform-video-data").attr("data-logobranding")});return a},filterVideoType:function(a,b){return a.filter(function(a){return a.split(".").pop()===b})},bitrateChange:function(a){a=
a.currentMetrics.bitrate;News.BitmovinPlayer.currentBitrate<a?(News.App.QuantumAnalytics.playbackBitRateShift("SpectrumLocal_Playback_Bit_Rate_Upshift_clipVOD",a),News.BitmovinPlayer.currentBitrate=a):News.BitmovinPlayer.currentBitrate>a&&(News.App.QuantumAnalytics.playbackBitRateShift("SpectrumLocal_Playback_Bit_Rate_Downshift_clipVOD",a),News.BitmovinPlayer.currentBitrate=a)},playbackSelectEvents:function(a){News.App.QuantumAnalytics.playbackSelect("SpectrumLocal_playbackSelect_clipVod","vod");
a&&"undefined"!==typeof a?News.App.QuantumAnalytics.uriAcquiredSuccess("SpectrumLocal_Stream_URI_Acquired_Successful_-_clipVOD"):News.App.QuantumAnalytics.uriAcquiredFailure("SpectrumLocal_Stream_URI_Acquired_Failure_-_clipVOD")},onClickPlaybackSelectEvents:function(a,b){var d=a.events.VIDEO_CLICKED;b||News.BitmovinPlayer.playbackSelectEvents(b);a.on(d,function(){News.App.QuantumAnalytics.isPlayBackSelected||News.BitmovinPlayer.playbackSelectEvents(b)})},unloadPage:function(){News.App.QuantumAnalytics.isPlayBackSelected&&
!News.App.QuantumAnalytics.isPlayBackStarted?News.App.QuantumAnalytics.playbackExitBeforeStartByUser("SpectrumLocal_playbackExitBeforeStart_vodClip_byUser"):News.App.QuantumAnalytics.isPlayBackStarted&&News.App.QuantumAnalytics.playbackStop("SpectrumLocal_Playback_Stop_clipVOD")},triggerMediaEvents:function(a,e){var d=a.player.exports.PlayerEvent.Play,f=a.player.exports.PlayerEvent.Paused,m=a.player.exports.PlayerEvent.StallStarted,h=a.player.exports.PlayerEvent.StallEnded,t=a.player.exports.PlayerEvent.PlaybackFinished,
l=a.player.exports.PlayerEvent.AdBreakStarted,p=a.player.exports.PlayerEvent.AdStarted,c=a.player.exports.PlayerEvent.AdFinished,g=a.player.exports.PlayerEvent.AdBreakFinished,q=a.player.exports.PlayerEvent.VolumeChanged,w=a.player.exports.PlayerEvent.Muted,x=a.player.exports.PlayerEvent.Unmuted,r=a.player.exports.PlayerEvent.Seek,k=a.events,n=k.ERROR,y=k.PLAYER_ERROR;k=k.PLAYBACK_STARTED;player=this;a.on(k,function(b){"undefined"!==b.bitrate&&(News.BitmovinPlayer.currentBitrate=b.bitrate);News.App.QuantumAnalytics.playbackStarted("SpectrumLocal_Playback_Start_clipVOD",
b.bitrate);News.BitmovinPlayer.MAInit||(News.BitmovinPlayer.MAInit=News.App.MediaAnalytics.initMediaAnalyticsData(a,e));News.BitmovinPlayer.MAInit.done(function(b,d,c){News.App.MediaAnalytics.triggerEvent(c.getResponseHeader("Location"),News.App.MediaAnalytics.playEvent(a,Math.round(a.getPosition())));News.App.MediaAnalytics.clearBufferPingInterval();News.App.MediaAnalytics.clearPausePingInterval();News.App.MediaAnalytics.vodPingInterval(a,c.getResponseHeader("Location"))})});a.player.on(d,function(b){"ui-seek"!==
b.issuer&&News.App.QuantumAnalytics.playbackUnPause("SpectrumLocal_Playback_Unpause_clipVOD");News.App.MediaAnalytics.IsPaused&&News.BitmovinPlayer.MAInit.done(function(b,d,c){News.App.MediaAnalytics.triggerEvent(c.getResponseHeader("Location"),News.App.MediaAnalytics.unPause(a,Math.round(a.getPosition())));News.App.MediaAnalytics.clearBufferPingInterval();News.App.MediaAnalytics.clearPausePingInterval();News.App.MediaAnalytics.vodPingInterval(a,c.getResponseHeader("Location"))})});a.player.on(f,
function(b){"ui-seek"!==b.issuer&&News.App.QuantumAnalytics.playbackPause("SpectrumLocal_Playback_Pause_clipVOD");News.BitmovinPlayer.MAInit.done(function(b,d,c){News.App.MediaAnalytics.triggerEvent(c.getResponseHeader("Location"),News.App.MediaAnalytics.pauseStart(a,Math.round(a.getPosition())));News.App.MediaAnalytics.clearMediaPingInterval();News.App.MediaAnalytics.clearStreamPlayheadPingInterval();News.App.MediaAnalytics.clearBufferPingInterval();News.App.MediaAnalytics.pausePingInterval(a,c.getResponseHeader("Location"))})});
a.player.on(r,function(a){a.position<a.seekTarget?News.App.QuantumAnalytics.playbackFFEvents(a.position,a.seekTarget):News.App.QuantumAnalytics.playbackRWEvents(a.position,a.seekTarget)});setInterval(function(){News.BitmovinPlayer.bitrateChange(a)},1E3);a.player.on(m,function(){News.App.QuantumAnalytics.bufferStart("SpectrumLocal_Buffering_Start_clipVOD");News.BitmovinPlayer.MAInit.done(function(b,c,d){News.App.MediaAnalytics.triggerEvent(d.getResponseHeader("Location"),News.App.MediaAnalytics.bufferStart(a,
Math.round(a.getPosition())));News.App.MediaAnalytics.clearStreamPlayheadPingInterval();News.App.MediaAnalytics.bufferingPingInterval(a,d.getResponseHeader("Location"))})});a.player.on(h,function(){News.App.QuantumAnalytics.bufferStop("SpectrumLocal_Buffering_Stop_clipVOD");News.BitmovinPlayer.MAInit.done(function(b,d,c){News.App.MediaAnalytics.triggerEvent(c.getResponseHeader("Location"),News.App.MediaAnalytics.playEvent(a,Math.round(a.getPosition())));News.App.MediaAnalytics.clearBufferPingInterval();
News.App.MediaAnalytics.vodPingInterval(a,c.getResponseHeader("Location"))})});a.player.on(t,function(){News.App.QuantumAnalytics.playbackStop("SpectrumLocal_Playback_Stop_clipVOD");News.BitmovinPlayer.MAInit.done(function(b,c,d){News.App.MediaAnalytics.triggerEvent(d.getResponseHeader("Location"),News.App.MediaAnalytics.playBackFinished(a,Math.round(a.getPosition())));News.App.MediaAnalytics.clearMediaPingInterval();News.App.MediaAnalytics.clearStreamPlayheadPingInterval()})});a.player.on(l,function(){b("#bitmovin-video-player").find(".playerBranding").hide();
News.BitmovinPlayer.MAInit.done(function(b,d,c){News.App.MediaAnalytics.clearMediaPingInterval();News.App.MediaAnalytics.triggerEvent(c.getResponseHeader("Location"),News.App.MediaAnalytics.adBreakStart(a))})});a.player.on(p,function(){News.BitmovinPlayer.MAInit.done(function(b,c,d){News.App.MediaAnalytics.triggerEvent(d.getResponseHeader("Location"),News.App.MediaAnalytics.adStart(a));News.App.MediaAnalytics.adPingInterval(d.getResponseHeader("Location"))})});a.player.on(c,function(){News.BitmovinPlayer.MAInit.done(function(b,
d,c){News.App.MediaAnalytics.triggerEvent(c.getResponseHeader("Location"),News.App.MediaAnalytics.adFinished(a))})});a.player.on(g,function(){b("#bitmovin-video-player").find(".playerBranding").show();News.BitmovinPlayer.MAInit.done(function(b,d,c){News.App.MediaAnalytics.clearAdPingInterval();News.App.MediaAnalytics.triggerEvent(c.getResponseHeader("Location"),News.App.MediaAnalytics.adBreakFinished(a));News.App.MediaAnalytics.vodPingInterval(a,c.getResponseHeader("Location"))})});a.on(n,function(a){News.App.QuantumAnalytics.playbackFailed("SpectrumLocal_Playback_Failure_clipVOD",
a.message,a.code)});a.on(y,function(a){News.App.QuantumAnalytics.playbackFailed("SpectrumLocal_Playback_Failure_clipVOD",a.message,a.code)});var u=!1,v;a.player.on(q,function(a){v&&clearTimeout(v);v=setTimeout(function(){var b=parseInt(a.targetVolume);!u&&0<b&&localStorage.setItem("vod-volume",b.toString())},200)});a.player.on(x,function(){localStorage.setItem("vod-volume",a.player.getVolume());u=!1});a.player.on(w,function(){u=!0;localStorage.setItem("vod-volume","0")})}};b(document).ready(function(){function a(b){"loginSuccess"===
b.detail.action&&window.top===window.self&&News.BitmovinPlayer.init();window.removeEventListener("userInteraction",a)}String.prototype.endsWith||(String.prototype.endsWith=function(a,b){if(void 0===b||b>this.length)b=this.length;return this.substring(b-a.length,b)===a});window.addEventListener("userStatus",function(b){!0===b.detail.usrAuth?window.addEventListener("userInteraction",a):window.top===window.self&&News.BitmovinPlayer.init()})});b(window).off("unload",function(){News.BitmovinPlayer.unloadPage()});
b(window).on("unload",function(){News.BitmovinPlayer.unloadPage()});b(window).on("load",function(){0==b("body.alerts-enabled").length&&b(".header-player .player-wrapper").addClass("noAlerts")})})(jQuery);